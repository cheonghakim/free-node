!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).FreeNode={})}(this,function(t){"use strict";class e{constructor(){this.types=new Map}register(t,e){if(this.types.has(t))throw new Error(`Node type exists: ${t}`);this.types.set(t,e)}createInstance(t){const e=this.types.get(t);if(!e)throw new Error(`Unknown node type: ${t}`);return e}}function s(){if("undefined"!=typeof crypto&&crypto.randomUUID)return crypto.randomUUID();const t=new Uint8Array(16);crypto.getRandomValues(t),t[6]=15&t[6]|64,t[8]=63&t[8]|128;const e=Array.from(t).map(t=>t.toString(16).padStart(2,"0"));return e.slice(0,4).join("")+"-"+e.slice(4,6).join("")+"-"+e.slice(6,8).join("")+"-"+e.slice(8,10).join("")+"-"+e.slice(10).join("")}class n{constructor({id:t,type:e,title:n,x:o=0,y:i=0,width:r=160,height:h=60}){this.id=t??s(),this.type=e,this.title=n??e,this.pos={x:o,y:i},this.size={width:r,height:h},this.inputs=[],this.outputs=[],this.state={}}addInput(t,e="any"){const n={id:s(),name:t,datatype:e,dir:"in"};return this.inputs.push(n),n}addOutput(t,e="any"){const n={id:s(),name:t,datatype:e,dir:"out"};return this.outputs.push(n),n}}class o{constructor({id:t,fromNode:e,fromPort:n,toNode:o,toPort:i}){this.id=t??s(),this.fromNode=e,this.fromPort=n,this.toNode=o,this.toPort=i}}class i{constructor({hooks:t,registry:e}){this.nodes=new Map,this.edges=new Map,this.hooks=t,this.registry=e,this._valuesA=new Map,this._valuesB=new Map,this._useAasCurrent=!0}getNodeById(t){for(let[e,s]of this.nodes.entries())if(t===e)return s;return null}addNode(t,e={}){var s,o,i,r;const h=this.registry.types.get(t);if(!h)throw new Error(`Unknown node type: ${t}`);const d=new n({type:t,title:h.title,width:null==(s=h.size)?void 0:s.w,height:null==(o=h.size)?void 0:o.h,...e});for(const n of h.inputs||[])d.addInput(n.name,n.datatype);for(const n of h.outputs||[])d.addOutput(n.name,n.datatype);return null==(i=h.onCreate)||i.call(h,d),this.nodes.set(d.id,d),null==(r=this.hooks)||r.emit("node:create",d),d}removeNode(t){for(const[e,s]of this.edges)s.fromNode!==t&&s.toNode!==t||this.edges.delete(e);this.nodes.delete(t)}addEdge(t,e,s,n){var i;const r=new o({fromNode:t,fromPort:e,toNode:s,toPort:n});return this.edges.set(r.id,r),null==(i=this.hooks)||i.emit("edge:create",r),r}clear(){var t,e;null==(t=this.nodes)||t.clear(),null==(e=this.edges)||e.clear(),this.nodes=new Map,this.edges=new Map}_curBuf(){return this._useAasCurrent?this._valuesA:this._valuesB}_nextBuf(){return this._useAasCurrent?this._valuesB:this._valuesA}swapBuffers(){this._useAasCurrent=!this._useAasCurrent,this._nextBuf().clear()}setOutput(t,e,s){this._nextBuf().set(`${t}:${e}`,s)}getInput(t,e){for(const s of this.edges.values())if(s.toNode===t&&s.toPort===e)return this._curBuf().get(`${s.fromNode}:${s.fromPort}`)}toJSON(){var t;const e={nodes:[...this.nodes.values()].map(t=>({id:t.id,type:t.type,title:t.title,x:t.pos.x,y:t.pos.y,w:t.size.width,h:t.size.height,inputs:t.inputs,outputs:t.outputs,state:t.state})),edges:[...this.edges.values()]};return null==(t=this.hooks)||t.emit("graph:serialize",e),e}static fromJSON(t,{hooks:e,registry:s}){const r=new i({hooks:e,registry:s});for(const o of t.nodes){const t=new n({id:o.id,type:o.type,title:o.title,x:o.x,y:o.y,width:o.w,height:o.h});t.inputs=o.inputs,t.outputs=o.outputs,t.state=o.state||{},r.nodes.set(t.id,t)}for(const n of t.edges)r.edges.set(n.id,new o(n));return r}}function r(t,e,s){const{x:n,y:o}=t.pos,{width:i,height:r}=t.size;return e>=n&&e<=n+i&&s>=o&&s<=o+r}function h(t,e,s,n){const o=t.pos.y+28+20*s;return"in"===n?{x:t.pos.x-8,y:o,w:8,h:14}:"out"===n?{x:t.pos.x+t.size.width,y:o,w:8,h:14}:void 0}class d{constructor(t,{theme:e={},registry:s,edgeStyle:n="orthogonal"}={}){this.canvas=t,this.ctx=t.getContext("2d"),this.registry=s,this.scale=1,this.minScale=.25,this.maxScale=3,this.offsetX=0,this.offsetY=0,this.edgeStyle=n,this.theme=Object.assign({bg:"#141417",grid:"#25252a",node:"#1e1e24",title:"#2a2a31",text:"#e9e9ef",port:"#8aa1ff",edge:"#7f8cff"},e)}setEdgeStyle(t){this.edgeStyle="line"===t||"orthogonal"===t?t:"bezier"}setRegistry(t){this.registry=t}resize(t,e){this.canvas.width=t,this.canvas.height=e}setTransform({scale:t=this.scale,offsetX:e=this.offsetX,offsetY:s=this.offsetY}={}){this.scale=Math.min(this.maxScale,Math.max(this.minScale,t)),this.offsetX=e,this.offsetY=s}panBy(t,e){this.offsetX+=t,this.offsetY+=e}zoomAt(t,e,s){const n=this.scale,o=Math.min(this.maxScale,Math.max(this.minScale,n*t));if(o===n)return;const i=(e-this.offsetX)/n,r=(s-this.offsetY)/n;this.offsetX=e-i*o,this.offsetY=s-r*o,this.scale=o}_drawArrowhead(t,e,s,n,o=10){const{ctx:i}=this,r=o/this.scale,h=Math.atan2(n-e,s-t);i.beginPath(),i.moveTo(s,n),i.lineTo(s-r*Math.cos(h-Math.PI/6),n-r*Math.sin(h-Math.PI/6)),i.lineTo(s-r*Math.cos(h+Math.PI/6),n-r*Math.sin(h+Math.PI/6)),i.closePath(),i.fill()}screenToWorld(t,e){return{x:(t-this.offsetX)/this.scale,y:(e-this.offsetY)/this.scale}}worldToScreen(t,e){return{x:t*this.scale+this.offsetX,y:e*this.scale+this.offsetY}}_applyTransform(){const{ctx:t}=this;t.setTransform(this.scale,0,0,this.scale,this.offsetX,this.offsetY)}_resetTransform(){this.ctx.setTransform(1,0,0,1,0,0)}_drawScreenText(t,e,s,{fontPx:n=12,color:o=this.theme.text,align:i="left",baseline:r="alphabetic",dpr:h=1}={}){const{ctx:d}=this,{x:a,y:l}=this.worldToScreen(e,s);d.save(),this._resetTransform();const c=Math.round(a)+.5,u=Math.round(l)+.5;d.font=n*this.scale+"px system-ui",d.fillStyle=o,d.textAlign=i,d.textBaseline=r,d.fillText(t,c,u),d.restore()}drawGrid(){const{ctx:t,canvas:e,theme:s,scale:n,offsetX:o,offsetY:i}=this;this._resetTransform(),t.fillStyle=s.bg,t.fillRect(0,0,e.width,e.height),this._applyTransform(),t.strokeStyle=s.grid,t.lineWidth=1/n;const r=20,h=-o/n,d=-i/n,a=(e.width-o)/n,l=(e.height-i)/n,c=Math.floor(h/r)*r,u=Math.floor(d/r)*r;t.beginPath();for(let f=c;f<=a;f+=r)t.moveTo(f,d),t.lineTo(f,l);for(let f=u;f<=l;f+=r)t.moveTo(h,f),t.lineTo(a,f);t.stroke(),this._resetTransform()}draw(t,{selection:e=new Set,tempEdge:s=null,running:n=!1,time:o=performance.now(),dt:i=0}={}){var r,h;this.drawGrid();const{ctx:d,theme:a}=this;if(this._applyTransform(),d.save(),n){const t=o/1e3*120/this.scale%12;d.setLineDash([6/this.scale,6/this.scale]),d.lineDashOffset=-t}else d.setLineDash([]),d.lineDashOffset=0;d.strokeStyle=a.edge,d.lineWidth=2*this.scale;for(const l of t.edges.values())this._drawEdge(t,l);if(s){const t=this.screenToWorld(s.x1,s.y1),e=this.screenToWorld(s.x2,s.y2),n=this.ctx.getLineDash();this.ctx.setLineDash([6/this.scale,6/this.scale]);let o=null;if("line"===this.edgeStyle?(this._drawLine(t.x,t.y,e.x,e.y),o=[{x:t.x,y:t.y},{x:e.x,y:e.y}]):"orthogonal"===this.edgeStyle?o=this._drawOrthogonal(t.x,t.y,e.x,e.y):(this._drawCurve(t.x,t.y,e.x,e.y),o=[{x:t.x,y:t.y},{x:e.x,y:e.y}]),this.ctx.setLineDash(n),o&&o.length>=2){const t=o[o.length-2],e=o[o.length-1];this.ctx.fillStyle=this.theme.edge,this.ctx.strokeStyle=this.theme.edge,this._drawArrowhead(t.x,t.y,e.x,e.y,12)}}d.restore();for(const l of t.nodes.values()){const t=e.has(l.id);this._drawNode(l,t);const s=null==(h=null==(r=this.registry)?void 0:r.types)?void 0:h.get(l.type);(null==s?void 0:s.onDraw)&&s.onDraw(l,{ctx:d,theme:a})}this._resetTransform()}_drawNode(t,e){const{ctx:s,theme:n}=this,{x:o,y:i}=t.pos,{width:r,height:d}=t.size;s.fillStyle=n.node,s.strokeStyle=e?"#6cf":"#333",s.lineWidth=(e?2:1.2)/this.scale,a(s,o,i,r,d,8),s.fill(),s.stroke(),s.fillStyle=n.title,a(s,o,i,r,24,{tl:8,tr:8,br:0,bl:0}),s.fill(),this._drawScreenText(t.title,o+8,i+12,{fontPx:12,color:n.text,baseline:"middle",align:"left"}),s.fillStyle=n.port,t.inputs.forEach((e,n)=>{const o=h(t,0,n,"in");s.fillRect(o.x,o.y,o.w,o.h)}),t.outputs.forEach((e,n)=>{const o=h(t,0,n,"out");s.fillRect(o.x,o.y,o.w,o.h)})}_drawEdge(t,e){const s=t.nodes.get(e.fromNode),n=t.nodes.get(e.toNode);if(!s||!n)return;const o=s.outputs.findIndex(t=>t.id===e.fromPort),i=n.inputs.findIndex(t=>t.id===e.toPort),r=h(s,0,o,"out"),d=h(n,0,i,"in"),a=r.x,l=r.y+7,c=d.x,u=d.y+7;"line"===this.edgeStyle?this._drawLine(a,l,c,u):"orthogonal"===this.edgeStyle?this._drawOrthogonal(a,l,c,u):this._drawCurve(a,l,c,u)}_drawLine(t,e,s,n){const{ctx:o}=this;o.beginPath(),o.moveTo(t,e),o.lineTo(s,n),o.stroke()}_drawPolyline(t){const{ctx:e}=this;e.beginPath(),e.moveTo(t[0].x,t[0].y);for(let s=1;s<t.length;s++)e.lineTo(t[s].x,t[s].y);e.stroke()}_drawOrthogonal(t,e,s,n){const o=(t+s)/2;let i;i=[{x:t,y:e},{x:o,y:e},{x:o,y:n},{x:s,y:n}];const{ctx:r}=this,h=r.lineJoin,d=r.lineCap;return r.lineJoin="round",r.lineCap="round",this._drawPolyline(i),r.lineJoin=h,r.lineCap=d,i}_drawCurve(t,e,s,n){const{ctx:o}=this,i=Math.max(40,.4*Math.abs(s-t));o.beginPath(),o.moveTo(t,e),o.bezierCurveTo(t+i,e,s-i,n,s,n),o.stroke()}}function a(t,e,s,n,o,i=6){"number"==typeof i&&(i={tl:i,tr:i,br:i,bl:i}),t.beginPath(),t.moveTo(e+i.tl,s),t.lineTo(e+n-i.tr,s),t.quadraticCurveTo(e+n,s,e+n,s+i.tr),t.lineTo(e+n,s+o-i.br),t.quadraticCurveTo(e+n,s+o,e+n-i.br,s+o),t.lineTo(e+i.bl,s+o),t.quadraticCurveTo(e,s+o,e,s+o-i.bl),t.lineTo(e,s+i.tl),t.quadraticCurveTo(e,s,e+i.tl,s),t.closePath()}function l(t,e,s,n,o){for(const[i,r]of t.edges)if(r.fromNode===e&&r.fromPort===s&&r.toNode===n&&r.toPort===o)return i;return null}class c{constructor(){this.undoStack=[],this.redoStack=[]}exec(t){t.do(),this.undoStack.push(t),this.redoStack.length=0}undo(){const t=this.undoStack.pop();t&&(t.undo(),this.redoStack.push(t))}redo(){const t=this.redoStack.pop();t&&(t.do(),this.undoStack.push(t))}}class u{constructor({graph:t,renderer:e,hooks:s}){this.graph=t,this.renderer=e,this.hooks=s,this.stack=new c,this.selection=new Set,this.dragging=null,this.connecting=null,this.panning=null,this._onKeyPressEvt=this._onKeyPress.bind(this),this._onDownEvt=this._onDown.bind(this),this._onWheelEvt=this._onWheel.bind(this),this._onMoveEvt=this._onMove.bind(this),this._onUpEvt=this._onUp.bind(this),this._cursor="default",this._bindEvents()}_bindEvents(){const t=this.renderer.canvas;t.addEventListener("mousedown",this._onDownEvt),t.addEventListener("wheel",this._onWheelEvt,{passive:!1}),window.addEventListener("mousemove",this._onMoveEvt),window.addEventListener("mouseup",this._onUpEvt),window.addEventListener("keydown",this._onKeyPressEvt)}_onKeyPress(t){return(t.ctrlKey||t.metaKey)&&"z"===t.key.toLowerCase()?(t.preventDefault(),t.shiftKey?this.stack.redo():this.stack.undo(),void this.render()):(t.ctrlKey||t.metaKey)&&"y"===t.key.toLowerCase()?(t.preventDefault(),this.stack.redo(),void this.render()):void("Delete"===t.key&&([...this.selection].forEach(t=>{const e=this.graph.getNodeById(t);this.stack.exec(function(t,e){let s=null,n=[];return{do(){s=e,n=t.edges?[...t.edges.values()].filter(t=>(console.log(t),t.fromNode===e.id||t.toNode===e.id)):[];for(const e of n)t.edges.delete(e.id);t.nodes.delete(e.id)},undo(){s&&t.nodes.set(s.id,s);for(const e of n)t.edges.set(e.id,e)}}}(this.graph,e)),this.graph.removeNode(t)}),this.render()))}_setCursor(t){this._cursor!==t&&(this._cursor=t,this.renderer.canvas.style.cursor=t)}_posScreen(t){const e=this.renderer.canvas.getBoundingClientRect();return{x:t.clientX-e.left,y:t.clientY-e.top}}_posWorld(t){const e=this._posScreen(t);return this.renderer.screenToWorld(e.x,e.y)}_findNodeAtWorld(t,e){const s=[...this.graph.nodes.values()];for(let n=s.length-1;n>=0;n--){const o=s[n];if(r(o,t,e))return o}return null}_findPortAtWorld(t,e){for(const s of this.graph.nodes.values()){for(let n=0;n<s.inputs.length;n++){if(f(h(s,s.inputs[n],n,"in"),t,e))return{node:s,port:s.inputs[n],dir:"in",idx:n}}for(let n=0;n<s.outputs.length;n++){if(f(h(s,s.outputs[n],n,"out"),t,e))return{node:s,port:s.outputs[n],dir:"out",idx:n}}}return null}_onWheel(t){t.preventDefault();const{x:e,y:s}=this._posScreen(t),n=Math.pow(1.0015,-t.deltaY);this.renderer.zoomAt(n,e,s),this.render()}_findIncomingEdge(t,e){for(const[s,n]of this.graph.edges)if(n.toNode===t&&n.toPort===e)return{id:s,edge:n};return null}_onDown(t){const e=this._posScreen(t),s=this._posWorld(t);if(1===t.button)return void(this.panning={x:e.x,y:e.y});const n=this._findPortAtWorld(s.x,s.y);if(0===t.button&&n&&"out"===n.dir){const t=h(n.node,n.port,n.idx,"out"),e=this.renderer.worldToScreen(t.x,t.y+7);return void(this.connecting={fromNode:n.node.id,fromPort:n.port.id,x:e.x,y:e.y})}if(0===t.button&&n&&"in"===n.dir){const t=this._findIncomingEdge(n.node.id,n.port.id);if(t){const{edge:e,id:s}=t,n=function(t,e){const s=t.edges.get(e);if(!s)return null;const{fromNode:n,fromPort:o,toNode:i,toPort:r}=s;return{do(){t.edges.delete(e)},undo(){t.addEdge(n,o,i,r)}}}(this.graph,s);n&&this.stack.exec(n);const o=this.graph.nodes.get(e.fromNode),i=o.outputs.findIndex(t=>t.id===e.fromPort),r=h(o,o.outputs[i],i,"out"),d=this.renderer.worldToScreen(r.x,r.y+7);return this.connecting={fromNode:e.fromNode,fromPort:e.fromPort,x:d.x,y:d.y,_removedEdge:{id:s,edge:e}},void this.render()}}const o=this._findNodeAtWorld(s.x,s.y);return 0===t.button&&o?(t.shiftKey||this.selection.clear(),this.selection.add(o.id),this.dragging={nodeId:o.id,dx:s.x-o.pos.x,dy:s.y-o.pos.y,startPos:{x:o.pos.x,y:o.pos.y}},void this.render()):0===t.button?(this.selection.size&&this.selection.clear(),this.panning={x:e.x,y:e.y},void this.render()):void 0}_onMove(t){var e;const s=this._posScreen(t),n=this.renderer.screenToWorld(s.x,s.y);if(this.panning){const t=s.x-this.panning.x,e=s.y-this.panning.y;return this.panning={x:s.x,y:s.y},this.renderer.panBy(t,e),void this.render()}if(this.dragging){const t=this.graph.nodes.get(this.dragging.nodeId);return t.pos.x=n.x-this.dragging.dx,t.pos.y=n.y-this.dragging.dy,null==(e=this.hooks)||e.emit("node:move",t),void this.render()}this.connecting&&(this.connecting.x=s.x,this.connecting.y=s.y,this.render());const o=this._findPortAtWorld(n.x,n.y);!o||"out"!==o.dir&&"in"!==o.dir?this._setCursor("default"):this._setCursor("grabbing")}_onUp(t){this._posScreen(t);const e=this._posWorld(t);if(this.panning)this.panning=null;else{if(this.connecting){const t=this.connecting,s=this._findPortAtWorld(e.x,e.y);s&&"in"===s.dir&&this.stack.exec(function(t,e,s,n,o){let i=null;return{do(){t.addEdge(e,s,n,o),i=l(t,e,s,n,o)},undo(){const r=i??l(t,e,s,n,o);null!=r&&t.edges.delete(r)}}}(this.graph,t.fromNode,t.fromPort,s.node.id,s.port.id)),this.connecting=null,this.render()}if(this.dragging){const t=this.graph.nodes.get(this.dragging.nodeId),e=this.dragging.startPos,i={x:t.pos.x,y:t.pos.y};e.x===i.x&&e.y===i.y||this.stack.exec((s=t,n=e,o=i,{do(){s.pos={...o}},undo(){s.pos={...n}}})),this.dragging=null}var s,n,o;this.dragging=null}}render(){const t=this.connecting?(()=>{const t=this._portAnchorScreen(this.connecting.fromNode,this.connecting.fromPort),e={x:this.connecting.x,y:this.connecting.y};return{x1:t.x,y1:t.y,x2:e.x,y2:e.y}})():null;this.renderer.draw(this.graph,{selection:this.selection,tempEdge:t})}_portAnchorScreen(t,e){const s=this.graph.nodes.get(t),n=s.outputs.findIndex(t=>t.id===e),o=h(s,0,n,"out");return this.renderer.worldToScreen(o.x,o.y+7)}}function f(t,e,s){return e>=t.x&&e<=t.x+t.w&&s>=t.y&&s<=t.y+t.h}class g{constructor({graph:t,registry:e,hooks:s,cyclesPerFrame:n=1}){this.graph=t,this.registry=e,this.hooks=s,this.running=!1,this._raf=null,this._last=0,this.cyclesPerFrame=Math.max(1,0|n)}isRunning(){return this.running}setCyclesPerFrame(t){this.cyclesPerFrame=Math.max(1,0|t)}step(t=1,e=0){var s,n;const o=Math.max(1,0|t);for(let r=0;r<o;r++){for(const t of this.graph.nodes.values()){const o=this.registry.types.get(t.type);if(null==o?void 0:o.onExecute)try{o.onExecute(t,{dt:e,graph:this.graph,getInput:e=>{const s=t.inputs.find(t=>t.name===e)||t.inputs[0];return s?this.graph.getInput(t.id,s.id):void 0},setOutput:(e,s)=>{const n=t.outputs.find(t=>t.name===e)||t.outputs[0];n&&this.graph.setOutput(t.id,n.id,s)}})}catch(i){null==(n=null==(s=this.hooks)?void 0:s.emit)||n.call(s,"error",i)}}this.graph.swapBuffers()}}start(){var t,e;if(this.running)return;this.running=!0,this._last=0,null==(e=null==(t=this.hooks)?void 0:t.emit)||e.call(t,"runner:start");const s=t=>{var e,n;if(!this.running)return;const o=this._last?t-this._last:0;this._last=t;const i=o/1e3;this.step(this.cyclesPerFrame,i),null==(n=null==(e=this.hooks)?void 0:e.emit)||n.call(e,"runner:tick",{time:t,dt:i,running:!0,cps:this.cyclesPerFrame}),this._raf=requestAnimationFrame(s)};this._raf=requestAnimationFrame(s)}stop(){var t,e;this.running&&(this.running=!1,this._raf&&cancelAnimationFrame(this._raf),this._raf=null,this._last=0,null==(e=null==(t=this.hooks)?void 0:t.emit)||e.call(t,"runner:stop"))}}t.createGraphEditor=function(t,{theme:s,hooks:n,autorun:o=!0}={}){const r=n??function(t){const e=Object.fromEntries(t.map(t=>[t,new Set]));return{on:(t,s)=>(e[t].add(s),()=>e[t].delete(s)),async emit(t,...s){for(const n of e[t])await n(...s)}}}(["node:create","node:move","edge:create","edge:delete","graph:serialize","error","runner:tick","runner:start","runner:stop"]),h=new e,a=new i({hooks:r,registry:h}),l=new d(t,{theme:s,registry:h}),c=new u({graph:a,renderer:l,hooks:r}),f=new g({graph:a,registry:h,hooks:r});r.on("runner:tick",({time:t,dt:e})=>{l.draw(a,{selection:c.selection,tempEdge:c.connecting?c.renderTempEdge():null,running:!0,time:t,dt:e})}),r.on("runner:start",()=>{l.draw(a,{selection:c.selection,tempEdge:c.connecting?c.renderTempEdge():null,running:!0,time:performance.now(),dt:0})}),r.on("runner:stop",()=>{l.draw(a,{selection:c.selection,tempEdge:c.connecting?c.renderTempEdge():null,running:!1,time:performance.now(),dt:0})}),h.register("core/Note",{title:"Note",size:{w:180,h:80},inputs:[{name:"in",datatype:"any"}],outputs:[{name:"out",datatype:"any"}],onCreate(t){t.state.text="hello"},onExecute(t,{dt:e,getInput:s,setOutput:n}){n("out",(s("in")??t.state.text??"").toString().toUpperCase()+` Â· ${Math.floor(performance.now()/1e3%100)}`)},onDraw(t,{ctx:e,theme:s}){const{x:n,y:o}=t.pos,{width:i}=t.size}}),l.resize(t.clientWidth,t.clientHeight),c.render();const p=new ResizeObserver(()=>{l.resize(t.clientWidth,t.clientHeight),c.render()});p.observe(t);const y={graph:a,renderer:l,controller:c,hooks:r,registry:h,runner:f,addNode:(...t)=>a.addNode(...t),toJSON:()=>a.toJSON(),fromJSON:t=>i.fromJSON(t,{hooks:r,registry:h}),resize:(t,e)=>l.resize(t,e),render:()=>c.render(),start:()=>f.start(),stop:()=>f.stop(),destroy:()=>{f.stop(),p.disconnect()}};return o&&f.start(),y},Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})});
//# sourceMappingURL=free-node.umd.js.map
